{% extends 'cliente/base_cliente.html' %}
{% block body %}


<div class="container my-4 px-2">
    <!-- Voltar -->
    <a href="{% url 'ticket-user' %}" class="text-decoration-none mb-3 d-block">&larr; Voltar</a>
    <!-- Título -->
    <h4 class="text-center mb-4">Meu Pedido</h4>
    <!-- Detalhes do Pedido -->
    <div class="mb-3">
        <h5>Detalhes do Pedido</h5>
        <p class="mb-1">
            <strong>{{ ticket.solicitante }}</strong>
            <a href="#" class="text-decoration-none">#0001</a>
        </p>
        <p>
            <span class="pedido-status ms-2">{{ ticket.get_status_display }}</span>
        </p>
    </div>
    <!-- Orçamentos -->
    <h6>{{ orcamentos.count }} Orçamentos recebidos</h6>
    <div class="row">
        {% for orcamento in orcamentos %}
        <div class="col-12 col-sm-6 col-md-4 mb-3">
            <div class="orcamento-card p-3 shadow-sm rounded">
                <p class="mb-1">Valor do orçamento:</p>
                <h5 class="text-warning">R$ {{ orcamento.valor }}</h5>
                <!--<img src="{{ profissional.foto }}" alt="Foto do profissional" class="my-2 rounded-circle" width="60"
                    height="60">-->
                <p class="mb-0"><strong>Prestador:  </strong> {{ orcamento.prestador }}</p>
                <p class="mb-0"> <strong>Descrição: </strong>  {{ orcamento.descricao }}</p>
                <p class="mb-0"><strong>Data Inicial:</strong> {{ orcamento.dataCriacao |date:"d/m/Y" }} </p>
                 <p class="mb-0"><strong>Data Final (Estimativa):</strong> {{ orcamento.prazo |date:"d/m/Y" }}</p>
                <!-- <p class="text-muted small mb-1">
                    ⭐ {{ profissional.avaliacao }} &nbsp; | &nbsp; {{ profissional.servicos }} serviços realizados
                </p> -->
                <div class="d-flex justify-content-between mt-2">
			 <a href="{% url 'aceitar-orcamento' orcamento.id %}" class="btn btn-success btn-sm">
        		 	Aceitar
    			 </a>
    			 <a href="#" class="btn btn-danger btn-sm">
        		 	Recusar
    			 </a>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    <hr style="border-top: 1px solid #ccc; margin-top: 40px;" />
    <!-- Mais informações -->
    <div class="mt-4">
        <h4>Mais informações:</h4>
        <br>
        <p><strong>Endereço:</strong> {{ ticket.endereco.logradouro }} {{ ticket.endereco.numero }}, {{ticket.endereco.bairro }} - {{ ticket.endereco.cidade }}</p>
        <p><strong>Data do pedido:</strong> {{ticket.dataCriacao|date:"d/m/Y" }}</p>
    </div>
    <!-- Tipo de serviço -->
    <div class="mt-4">
        <p class="mb-4">
            <strong>Tipo de serviço:</strong> {{ticket.get_categoria_display }}
        </p>
    </div>
    <!-- Botão Cancelar -->
    <div class="text-end">
        <button class="btn" style="background-color: #8b0000; color: white;">
            Cancelar
        </button>
    </div>
</div>
</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
{% endblock %}